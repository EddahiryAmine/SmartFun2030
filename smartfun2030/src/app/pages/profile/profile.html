<h1>Mon Profil</h1>

<p><strong>Email :</strong> {{ email }}</p>
<p><strong>RÃ´les :</strong> {{ roles.join(', ') }}</p>

<hr>

<!-- ===================== MES TICKETS ===================== -->
<h2>ğŸŸï¸ Mes Tickets</h2>

<div *ngIf="loadingTickets">Chargement...</div>

<div *ngIf="ticketError" class="error">{{ ticketError }}</div>

<div *ngIf="myTickets.length === 0 && !loadingTickets">
  Aucun ticket achetÃ© pour le moment.
</div>

<ul>
  <li *ngFor="let t of myTickets">
    <b>{{ t.matchId }}</b> â€” {{ t.category }} â€”
    {{ t.quantity }} places â€” {{ t.totalPrice }} DH
    <br>
    <small>AchetÃ© le : {{ t.purchaseDate | date:'short' }}</small>
  </li>
</ul>

<hr>

<!-- ===================== FAVORIS ===================== -->
<h2>â­ Mes favoris</h2>

<div *ngIf="loadingFavorites">Chargement favoris...</div>
<div *ngIf="favoriteError" class="error">{{ favoriteError }}</div>

<div *ngIf="favorites.length === 0 && !loadingFavorites">
  Aucun favori.
</div>

<ul>
  <li *ngFor="let f of favorites">
    Match ID : {{ f.matchId }}

    <button (click)="removeFavorite(f.matchId)" style="margin-left:10px;">
      âŒ Retirer
    </button>
  </li>
</ul>

<hr>

<!-- ===================== PANIER ===================== -->
<h2>ğŸ›’ Mon Panier</h2>

<div *ngIf="loadingCart">Chargement panier...</div>
<div *ngIf="cartError" class="error">{{ cartError }}</div>

<div *ngIf="cart.length === 0 && !loadingCart">
  Panier vide.
</div>

<ul>
  <li *ngFor="let c of cart">
    Match {{ c.matchId }} â€” {{ c.category }}
    â€” {{ c.quantity }} places â€” {{ c.unitPrice }} DH/place

    <button (click)="removeCartItem(c.id)" style="margin-left:10px;">
      Supprimer
    </button>
  </li>
</ul>

<div *ngIf="cart.length > 0">
  <h3>Total : {{ getCartTotal() }} DH</h3>

  <button (click)="clearCart()">
    Vider le panier
  </button>

  <button style="margin-left:10px; background:#28a745; color:white;">
    ProcÃ©der au paiement (Ã  implÃ©menter)
  </button>
</div>
